{"version":3,"file":"transition.js","sources":["../src/transition.js"],"sourcesContent":["class Transition extends HTMLElement {\n  constructor() {\n    super();\n    let root = this.attachShadow({ mode: 'open' });\n    root.innerHTML = `<style>:host{display:block;contain:content;}</style><slot></slot>`;\n  }\n\n  connectedCallback() {\n    let self = this;\n    let attr = (name) => self.getAttribute(name) || '';\n    self.enterActive_ = attr('enter-active');\n    self.enterFrom_ = attr('enter-from');\n    self.enterTo_ = attr('enter-to');\n    self.leaveActive_ = attr('leave-active');\n    self.leaveFrom_ = attr('leave-from');\n    self.leaveTo_ = attr('leave-to');\n\n    if (self.show) {\n      self.addClasses_(self.enterTo_);\n    } else {\n      self.addClasses_(self.leaveTo_);\n    }\n  }\n\n  get show() {\n    return this.hasAttribute('show');\n  }\n  set show(val) {\n    let self = this;\n    if (val) {\n      self.setAttribute('show', '');\n    } else {\n      self.removeAttribute('show');\n    }\n\n    if (val) {\n      self.onEnter_();\n    } else {\n      self.onLeave_();\n    }\n  }\n\n  onEnter_() {\n    let self = this;\n    self.removeClasses_(self.leaveActive_);\n    self.removeClasses_(self.leaveTo_);\n    self.addClasses_(self.enterActive_);\n    self.addClasses_(self.enterFrom_);\n    self.animate_(\n      () => {\n        self.removeClasses_(self.enterFrom_)\n        self.addClasses_(self.enterTo_)\n      },\n      () => self.removeClasses_(self.enterActive_),\n    );\n  }\n\n  onLeave_() {\n    let self = this;\n    self.removeClasses_(self.enterActive_);\n    self.removeClasses_(self.enterTo_);\n    self.addClasses_(self.leaveActive_);\n    self.addClasses_(self.leaveFrom_);\n    self.animate_(\n      () => {\n        self.removeClasses_(self.leaveFrom_)\n        self.addClasses_(self.leaveTo_)\n      },\n      () => self.removeClasses_(self.leaveActive_),\n    );\n  }\n\n  animate_(setup, teardown) {\n    requestAnimationFrame(setup);\n    this.addEventListener('transitionend', teardown, { once: true });\n    this.addEventListener('animationend', teardown, { once: true });\n  }\n\n  addClasses_(val) {\n    this.classList.add(...val.split(' '));\n  }\n\n  removeClasses_(val) {\n    this.classList.remove(...val.split(' '));\n  }\n}\n\ncustomElements.define('x-transition', Transition);"],"names":["Transition","HTMLElement","[object Object]","super","this","attachShadow","mode","innerHTML","self","attr","name","getAttribute","enterActive_","enterFrom_","enterTo_","leaveActive_","leaveFrom_","leaveTo_","show","addClasses_","hasAttribute","val","setAttribute","removeAttribute","onEnter_","onLeave_","removeClasses_","animate_","setup","teardown","requestAnimationFrame","addEventListener","once","classList","add","split","remove","customElements","define"],"mappings":"AAAA,MAAMA,UAAmBC,YACvBC,cACEC,QACWC,KAAKC,aAAa,CAAEC,KAAM,SAChCC,UAAY,oEAGnBL,oBACE,IAAIM,EAAOJ,KACPK,EAAQC,GAASF,EAAKG,aAAaD,IAAS,GAChDF,EAAKI,EAAeH,EAAK,gBACzBD,EAAKK,EAAaJ,EAAK,cACvBD,EAAKM,EAAWL,EAAK,YACrBD,EAAKO,EAAeN,EAAK,gBACzBD,EAAKQ,EAAaP,EAAK,cACvBD,EAAKS,EAAWR,EAAK,YAEjBD,EAAKU,KACPV,EAAKW,EAAYX,EAAKM,GAEtBN,EAAKW,EAAYX,EAAKS,GAI1BC,WACE,OAAOd,KAAKgB,aAAa,QAE3BF,SAASG,GACP,IAAIb,EAAOJ,KACPiB,EACFb,EAAKc,aAAa,OAAQ,IAE1Bd,EAAKe,gBAAgB,QAGnBF,EACFb,EAAKgB,IAELhB,EAAKiB,IAITvB,IACE,IAAIM,EAAOJ,KACXI,EAAKkB,EAAelB,EAAKO,GACzBP,EAAKkB,EAAelB,EAAKS,GACzBT,EAAKW,EAAYX,EAAKI,GACtBJ,EAAKW,EAAYX,EAAKK,GACtBL,EAAKmB,EACH,KACEnB,EAAKkB,EAAelB,EAAKK,GACzBL,EAAKW,EAAYX,EAAKM,IAExB,IAAMN,EAAKkB,EAAelB,EAAKI,IAInCV,IACE,IAAIM,EAAOJ,KACXI,EAAKkB,EAAelB,EAAKI,GACzBJ,EAAKkB,EAAelB,EAAKM,GACzBN,EAAKW,EAAYX,EAAKO,GACtBP,EAAKW,EAAYX,EAAKQ,GACtBR,EAAKmB,EACH,KACEnB,EAAKkB,EAAelB,EAAKQ,GACzBR,EAAKW,EAAYX,EAAKS,IAExB,IAAMT,EAAKkB,EAAelB,EAAKO,IAInCb,EAAS0B,EAAOC,GACdC,sBAAsBF,GACtBxB,KAAK2B,iBAAiB,gBAAiBF,EAAU,CAAEG,MAAM,IACzD5B,KAAK2B,iBAAiB,eAAgBF,EAAU,CAAEG,MAAM,IAG1D9B,EAAYmB,GACVjB,KAAK6B,UAAUC,OAAOb,EAAIc,MAAM,MAGlCjC,EAAemB,GACbjB,KAAK6B,UAAUG,UAAUf,EAAIc,MAAM,OAIvCE,eAAeC,OAAO,eAAgBtC"}